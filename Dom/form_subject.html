<!DOCTYPE html>
<html>
<head>
    <title>Simple Form Validation</title>
</head>
<body>

<form id="regForm" action="#"  method="post">
    <h1 align="center">Registration Form</h1>

    <table>
        <tr>
            <td>Name</td>
            <td><input type="text" id="uname"></td>
        </tr>

        <tr>
            <td>Roll no</td>
            <td><input type="number" id="uroll"></td>
        </tr>

        <tr>
            <td>subject 1</td>
            <td><select id="usubject1" onchange="updateSubject2()">
                <option value="">--Select Subject 1--</option>
                <option value="awt">AWT</option>
                <option value="ui/ux">UI/UX</option>
                <option value="ml">ML</option>
            </select></td>
        </tr>

        <tr>
            <td>subject 2</td>
            <td><select id="usubject2">
                <option value="">--Select Subject 2--</option>
                
            </select></td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="button" value="Register" onclick="validateForm()">
                 
            </td>
        </tr>
    </table>
</form>


<script>

// document.getElementById("usubject1").onchange = function() {
//     alert("You selected " + this.value);
// };

function updateSubject2() {
    let s1 = document.getElementById("usubject1").value;
    let s2 = document.getElementById("usubject2");
    
    //usubject2.add(new Option("--Select Subject 2--", ""));
            s2.innerHTML = "<option value=''>--Select Subject 2--</option>"; // reset

            if (s1 === "awt") {
                s2.innerHTML += "<option value='ins'>INS</option>";
                s2.innerHTML += "<option value='devops'>DevOps</option>";
            }
            else if (s1 === "ui/ux") {
                s2.innerHTML += "<option value='se'>SE</option>";
                s2.innerHTML += "<option value='cn'>CN</option>";
            }
            else if (s1 === "ml") {
                s2.innerHTML += "<option value='dl'>DL</option>";
                s2.innerHTML += "<option value='seo'>SEO</option>";
            }
}

function validateForm() {

    let name = document.getElementById("uname").value;
    let roll = document.getElementById("uroll").value;
    let s1 = document.getElementById("usubject1").value;
    let s2 = document.getElementById("usubject2").value;

    const allowed = {
        "awt": ["ins", "devops"],
        "ui/ux": ["cn", "se"],
        "ml": ["dl", "seo"]
    };

    // NAME
    if (name === "") {
        alert("Name cannot be empty.");
    }
    else if (name.length < 3) {
        alert("Username must be at least 3 characters.");
    }

    // ROLL NO
    else if (roll === "") {
        alert("Roll no cannot be empty.");
    }
    else if (isNaN(roll) || roll <= 0) {
        alert("Roll no must be a positive number.");
    }
    // SUBJECT1 if subject 1 === awt then subject 2 should be only ins or deveops
    else if(s1 === "") {
        alert("Please select Subject 1.");
        return;
    } 
    else if (s2 === "") {
        alert("Please select Subject 2.");
        return;
    }
    // else if (s1==='awt' && (s2 !== 'ins' && s2 !== 'deveops')) {
    //     alert("Invalid Subject 2 selected.");
    //     return;
    // }

    // // Check if Subject2 is valid for selected Subject1
    else if (!allowed[s1].includes(s2)) {
        alert(`If Subject 1 is ${s1.toUpperCase()}, Subject 2 must be either ${allowed[s1].join(" or ")}.`);
        return;
    }

    else {
        alert("Form Submitted Successfully!");
        document.getElementById("regForm").submit();
    }
    }
</script>


</body>
</html>